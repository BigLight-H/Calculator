<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8" />
    <title>家私计算器平台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="" name="description" />
    <meta content="" name="author" />
    <link rel="shortcut icon" href="/static/img/ico/19.ico" sizes="64x64" type="image/x-icon"/>
    <link rel="apple-touch-icon-precomposed" href="/static/img/ico/60.png" type="image/png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/img/ico/72.png" type="image/png"/>
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/static/img/ico/120.png" type="image/png"/>
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/static/img/ico/150.png" type="image/png"/>

    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/plugins/dualListbox/bootstrap-duallistbox.min.css" rel="stylesheet">

</head>

<body style="background: white;padding: 1rem;">
    <div class="row">
        <div class="col-lg-12">
            <div class="tabs-container">
                <button class="btn btn-primary " type="button" style="position: absolute;right: 1rem;" onclick="calculate_all();">
                    <i class="fa fa-check"></i>
                    <font style="vertical-align: inherit;">
                        <font style="vertical-align: inherit;">&nbsp;计算价格</font>
                    </font>
                </button>
                <ul class="nav nav-tabs">
                    <li>
                        <a class="nav-link active show" data-toggle="tab" href="#tab-3">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> 地台床</font>
                            </font>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-4">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> 高床</font>
                            </font>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-5">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> 衣柜</font>
                            </font>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-6">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> C字柜</font>
                            </font>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-7">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> 鞋柜</font>
                            </font>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-8">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> 衣柜地台床配件</font>
                            </font>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-9">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> 地櫃</font>
                            </font>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" data-toggle="tab" href="#tab-10">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"> 吊柜</font>
                            </font>
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div id="tab-3" class="tab-pane active">
                        {{template "floor-bad.html" .}}
                    </div>
                    <div id="tab-4" class="tab-pane">
                        {{template "high-bad.html" .}}
                    </div>
                    <div id="tab-5" class="tab-pane">
                        {{template "wardrobe.html" .}}
                    </div>
                    <div id="tab-6" class="tab-pane">
                        {{template "c-cabinet.html" .}}
                    </div>
                    <div id="tab-7" class="tab-pane">
                        {{template "shoebox.html" .}}
                    </div>
                    <div id="tab-8" class="tab-pane">
                        {{template "fitting.html" .}}
                    </div>
                    <div id="tab-9" class="tab-pane">
                        {{template "cabinet.html" .}}
                    </div>
                    <div id="tab-10" class="tab-pane">
                        {{template "wall-cabinet.html" .}}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {{/*  活动   */}}
    <div class="row" style="padding: 2rem 1rem 1rem 1rem;">
        <div class="col-md-12" style="display: flex">
            <div class="input-group col-md-3">
                <label style="padding-top: 7px;">
                    <font style="vertical-align: inherit;">
                        <font style="vertical-align: inherit;">优惠活动:&nbsp;&nbsp;&nbsp;</font>
                    </font>
                </label>
                <select class="form-control" id="discount">
                    <option value="-1">选择优惠</option>
                    <option value="1">滿2萬91折優惠</option>
                </select>
            </div>
            <div class="col-md-1">&nbsp;</div>
            <div class="input-group col-md-3">
                <label style="padding-top: 7px;">
                    <font style="vertical-align: inherit;">
                        <font style="vertical-align: inherit;">老客户推荐:&nbsp;&nbsp;&nbsp;</font>
                    </font>
                </label>
                <select class="form-control" id="recommend">
                    <option value="-1">选择优惠</option>
                    <option value="1">滿1萬减500優惠</option>
                </select>
            </div>
        </div>
    </div>

    {{/*  计算结果  */}}
    <div class="row" style="margin-top: 1rem">
        <div class="col-lg-12">
            <div class="jumbotron">
                <h1>计算结果</h1>
                <div id="results" class="results"></div>
            </div>
            <p>
                <button id="copy" class="btn btn-primary pull-right" type="button" data-clipboard-target="#results" data-toggle="tooltip"
                        data-placement="left" title="已复制!" data-trigger="click" ><i class="fa fa-check"></i>&nbsp;复制文本</button>
            </p>
        </div>
    </div>

    <!-- Mainly scripts -->
    <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <script src="/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="/static/js/clipboard.min.js"></script>


    <!-- Custom and plugin javascript -->
    <script src="/static/js/inspinia.js"></script>
    <script src="/static/js/plugins/pace/pace.min.js"></script>
    <script>
        $(function () { $("[data-toggle='tooltip']").tooltip(); });

        function calculate_all() {
            $("#results").text('');
            let html='';
            if (floorPrice() != false) {
                html += floorPrice();
            }
            if (highPrice() != false) {
                html += highPrice();
            }
            if (wardrobePrice() != false) {
                html += wardrobePrice();
            }
            if (wardrobeCPrice() != false) {
                html += wardrobeCPrice();
            }
            if (ShoeboxPrice() != false) {
                html += ShoeboxPrice();
            }
            if (fitPrice() != false) {
                html += fitPrice();
            }
            if (cabinetPrice() != false) {
                html += cabinetPrice();
            }
            if (wallPrice() != false) {
                html += wallPrice();
            }
            //合计
            let money = Number($("#floor_price").val())
                + Number($("#high_price").val())
                + Number($("#wardrobe_price").val())
                + Number($("#wardrobe_c_price").val())
                + Number($("#shoebox_price").val())
                + Number($("#fitting_price").val())
                + Number($("#cabinet_price").val())
                + Number($("#wall_price").val());

            let z_h = Math.round(Number(money));

            if (Number(money) > 0) {
                html += '<p>總價合計='+ Math.round(Number(money)) + '港幣左右</p>';
            }
            let discount = $("#discount").val();//活动优惠
            let recommend = $("#recommend").val();//客户推荐

            if (Number(discount) > 0) {
                z_h = zhekou(Math.round(Number(money)), discount);
                html += '<p> 最新活動，'+ $("#discount").text() +'，折後'+ z_h +'港幣左右</p>';
            }

            if (Number(recommend) > 0) {
                html += '<p> 老客戶介紹，'+ $("#recommend").text() +'，减後'+ jianhou(z_h, recommend) +'港幣左右</p>';
            }

            $("#results").append(html);
        }

        var clipboard = new ClipboardJS('#copy');

        clipboard.on('success', function(e) {
            console.info('Action:', e.action);
            console.info('Text:', e.text);
            console.info('Trigger:', e.trigger);

            e.clearSelection();

        });

        clipboard.on('error', function(e) {
            console.error('Action:', e.action);
            console.error('Trigger:', e.trigger);
        });

        //折扣
        function zhekou(m, n) {
            switch (n) {
                case '1':
                    return Math.round(Number(m) * 0.91);
                    break;
            }
        }
        //减后
        function jianhou(m, n) {
            switch (n) {
                case '1':
                    console.log(m);
                    return Math.round(Number(m) - 500);
                break;
            }
        }


    </script>


</body>

</html>
